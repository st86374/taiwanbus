import{o as v,c as h,a as re,u as H,b as V,d as G,e as K,f as e,g as _,w as l,h as Q,i as ie,r as ve,j,v as U,k as ee,F as P,l as he,m as me,n as k,p as Y,q as te,s as oe,t as N,x as A,y as be,z as m,A as xe,L as ce,B as ye,C as fe,D as ke,E as we}from"./vendor.e9b07322.js";const _e=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))y(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&y(f)}).observe(document,{childList:!0,subtree:!0});function x(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerpolicy&&(u.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?u.credentials="include":n.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function y(n){if(n.ep)return;n.ep=!0;const u=x(n);fetch(n.href,u)}};_e();var $e=(i,r)=>{const x=i.__vccOpts||i;for(const[y,n]of r)x[y]=n;return x};const Ce={},Te={class:"w-screen h-screen z-30 text-white bg-black/50 backdrop-blur-md flex items-center justify-center fixed top-0 left-0"},Se=re('<div><p class="flex-1 text-center text-2xl font-bold italic"><span class="text-main text-2xl font-bold italic">T</span>aiwan<span class="text-main text-2xl font-bold italic">B</span>us </p><div class="my-3 flex items-center justify-center space-x-2 animate-pulse"><div class="w-4 h-4 bg-orange-400 rounded-full"></div><div class="w-4 h-4 bg-orange-400 rounded-full"></div><div class="w-4 h-4 bg-orange-400 rounded-full"></div></div><p class="text-center">\u8CC7\u6599\u8B80\u53D6\u4E2D</p></div>',1),Ee=[Se];function Me(i,r){return v(),h("div",Te,Ee)}var De=$e(Ce,[["render",Me]]);const Pe={class:"relative flex items-center justify-center w-full p-2 text-gray-400 bg-white dark:bg-black"},Ae=e("div",{class:"absolute top-0 right-0 left-0 bottom-0 z-[-1]"},null,-1),Le={class:"flex-1"},Ne=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Be=[Ne],Ie=e("h1",{class:"flex-1 text-2xl italic font-bold text-center"},[e("span",{class:"text-2xl italic font-bold text-main"},"T"),ie("aiwan"),e("span",{class:"text-2xl italic font-bold text-main"},"B"),ie("us ")],-1),Re=[Ie],je={class:"flex items-center justify-end flex-1"},ze={for:"toggleTheme",class:"flex items-center cursor-pointer"},Ze={class:"relative"},Oe=["checked"],He=re('<div class="block h-8 bg-gray-600 rounded-full w-14"></div><svg xmlns="http://www.w3.org/2000/svg" class="moon h-6 w-6 absolute text-white right-[3px] bottom-2/4 translate-y-2/4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="sun h-6 w-6 absolute text-white left-[3px] bottom-2/4 translate-y-2/4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><div id="toggleDot" class="absolute w-6 h-6 transition bg-white rounded-full dot left-1 top-1"></div>',4),Ve={setup(i){const r=H(),x=V(),y=G();K(()=>r.getters.theme);const n=K(()=>!document.documentElement.classList.contains("dark"));o();const u=b=>{y.go(b)},f=()=>{x.path==="/"?window.location.hash="":(y.push("/"),console.log("check"))},C=b=>{document.getElementById("toggleDot"),b.currentTarget.checked?(document.documentElement.classList.remove("dark"),r.dispatch("handThemeSet",!0)):(document.documentElement.classList.add("dark"),r.dispatch("handThemeSet",!1))};function o(){return"matchMedia"in window?matchMedia("(prefers-color-scheme: dark)").matches:void 0}return(b,s)=>(v(),h("header",Pe,[Ae,e("div",Le,[_(x).path!="/"?(v(),h("a",{key:0,onClick:s[0]||(s[0]=l(a=>u(-1),["prevent"])),href:"#"},Be)):Q("",!0)]),e("a",{href:"#",onClick:s[1]||(s[1]=l(a=>f(),["prevent"]))},Re),e("div",je,[e("label",ze,[e("div",Ze,[e("input",{checked:_(n),type:"checkbox",id:"toggleTheme",class:"sr-only",onChange:s[2]||(s[2]=a=>C(a))},null,40,Oe),He])])])]))}},Ge={class:"max-w-md mx-auto"},Ke={setup(i){const r=H(),x=K(()=>r.getters.loading);return(y,n)=>{const u=ve("router-view");return v(),h(P,null,[j(ee(De,null,null,512),[[U,_(x)]]),e("div",Ge,[ee(Ve),ee(u)])],64)}}},F=[{name:"\u81FA\u5317\u5E02",value:"Taipei",municipality:!0,area:"north"},{name:"\u65B0\u5317\u5E02",value:"NewTaipei",municipality:!0,area:"north"},{name:"\u6843\u5712\u5E02",value:"Taoyuan",municipality:!0,area:"north"},{name:"\u81FA\u4E2D\u5E02",value:"Taichung",municipality:!0,area:"central"},{name:"\u81FA\u5357\u5E02",value:"Tainan",municipality:!0,area:"south"},{name:"\u9AD8\u96C4\u5E02",value:"Kaohsiung",municipality:!0,area:"south"},{name:"\u57FA\u9686\u5E02",value:"Keelung",municipality:!1,area:"north"},{name:"\u65B0\u7AF9\u5E02",value:"Hsinchu",municipality:!1,area:"north"},{name:"\u65B0\u7AF9\u7E23",value:"HsinchuCounty",municipality:!1,area:"north"},{name:"\u82D7\u6817\u7E23",value:"MiaoliCounty",municipality:!1,area:"central"},{name:"\u5F70\u5316\u7E23",value:"ChanghuaCounty",municipality:!1,area:"central"},{name:"\u5357\u6295\u7E23",value:"NantouCounty",municipality:!1,area:"central"},{name:"\u96F2\u6797\u7E23",value:"YunlinCounty",municipality:!1,area:"central"},{name:"\u5609\u7FA9\u7E23",value:"ChiayiCounty",municipality:!1,area:"south"},{name:"\u5609\u7FA9\u5E02",value:"Chiayi",municipality:!1,area:"south"},{name:"\u5C4F\u6771\u7E23",value:"PingtungCounty",municipality:!1,area:"south"},{name:"\u5B9C\u862D\u7E23",value:"YilanCounty",municipality:!1,area:"north"},{name:"\u82B1\u84EE\u7E23",value:"HualienCounty",municipality:!1,area:"east"},{name:"\u81FA\u6771\u7E23",value:"TaitungCounty",municipality:!1,area:"east"},{name:"\u91D1\u9580\u7E23",value:"KinmenCounty",municipality:!1,area:"island"},{name:"\u6F8E\u6E56\u7E23",value:"PenghuCounty",municipality:!1,area:"island"},{name:"\u9023\u6C5F\u7E23",value:"LienchiangCounty",municipality:!1,area:"island"}],I=he.create({baseURL:"https://ptx.transportdata.tw/MOTC/v2/Bus/"}),Ue=()=>{const i="af3a01e61d284651b860be124d87fe65",r="NblqJVsM9mca0s-oZfmWJ-PDspY",x=new Date().toUTCString(),y=new me("SHA-1","TEXT");y.setHMACKey(r,"TEXT"),y.update("x-date: "+x);const n=y.getHMAC("B64");return{Authorization:'hmac username="'+i+'", algorithm="hmac-sha1", headers="x-date", signature="'+n+'"',"X-Date":x}};I.interceptors.request.use(i=>(i.headers=Ue(),i),i=>Promise.reject(i));const Fe=i=>I.get(`Route/City/${i}`),ue=(i,r)=>I.get(`EstimatedTimeOfArrival/City/${i}/${r}`),We=(i,r)=>I.get(`StopOfRoute/City/${i}/${r}`),qe=(i,r)=>I.get(`StopOfRoute/City/${i}?$filter=Stops/any(c: c/StopName/Zh_tw eq '${r}')`),de=(i,r)=>I.get(`Route/City/${i}/${r}`),Ye=(i,r)=>I.get(`Stop/City/${i}?$filter=StopName/Zh_tw eq '${r}'`),Xe={class:"bg-top bg-cover bg-no-repeat bg-[url('@/assets/img/banner-2.jpeg')] dark:bg-[url('@/assets/img/banner.jpeg')] w-full min-h-[calc(50vh-40px)] relative overflow-hidden"},Je=e("div",{class:"absolute w-full h-[30px] scale-150 bg-white dark:bg-black bottom-[-20px] blur-sm"},null,-1),Qe=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),et=[Qe],tt={key:0,class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 grid-rows-4 p-2 min-h-[50vh]"},ot=["onClick"],at={key:1},st={class:"sticky top-[47px] flex items-center bg-white dark:bg-black dark:text-white"},nt={class:"text-black bg-white dark:text-white dark:bg-black"},lt={class:"js-block",id:"north"},rt=e("h2",{class:"p-2 mx-3 text-2xl font-bold text-main"},"\u5317\u90E8",-1),it={class:"dark:text-white text-xl gap-2 grid grid-flow-row-dense grid-cols-2 grid-rows-4 p-2 min-h-[50vh]"},ct=["onClick"],ut={class:"js-block",id:"central"},dt=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u4E2D\u90E8",-1),gt={class:"text-xl gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[37.5vh]"},pt=["onClick"],vt={class:"js-block",id:"south"},ht=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u5357\u90E8",-1),mt={class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[37.5vh]"},bt=["onClick"],xt={class:"js-block",id:"east"},yt=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u6771\u90E8",-1),ft={class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[12.5vh]"},kt=["onClick"],wt={class:"js-block",id:"island"},_t=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u5916\u5CF6",-1),$t={class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[25vh]"},Ct=["onClick"],Tt={class:"p-2 text-center text-gray-400 bg-white footer dark:bg-black"},St=e("p",null,"Copyright\xA92022 TangYuCheng",-1),Et={setup(i){const r=V(),x=G(),y=k("home"),n=k(-1);Y(()=>{window.addEventListener("scroll",C)}),te(()=>{window.removeEventListener("scroll",C)});const u=b=>{let s;return b?s=F.filter(a=>a.area===b):s=F.filter(a=>a.municipality),s},f=b=>{if(b>-1){const s=document.querySelectorAll(".js-block");scrollTo(s[b].offsetTop,s[b].offsetTop-90),setTimeout(()=>{n.value=b},500)}else scrollTo(window.offsetTop,window.offsetTop)},C=b=>{b=document.documentElement;const s=document.querySelectorAll(".js-block");for(let a=s.length-1;a>=0;a--)if(b.scrollTop-100>=s[a].offsetTop-s[0].offsetTop){n.value=a;break}},o=b=>{y.value=b,b==="all"?(window.location.hash="all",y.value="all",setTimeout(()=>{f(0)},0)):(window.location.hash="",y.value="home")};return oe(()=>r.hash,(b,s)=>{s?y.value="home":y.value="all"}),(b,s)=>(v(),h(P,null,[e("div",Xe,[Je,j(e("a",{class:"fixed z-10 left-[8px] top-[8px] text-gray-400",onClick:s[0]||(s[0]=l(a=>(o("home"),f(-1)),["prevent"])),href:"#"},et,512),[[U,y.value=="all"]])]),y.value==="home"?(v(),h("div",tt,[(v(!0),h(P,null,N(u(),a=>(v(),h("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:l(E=>_(x).push(`/city/${a.value}`),["prevent"])},m(a.name),9,ot))),128)),e("button",{class:"col-span-2 duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",onClick:s[1]||(s[1]=l(a=>o("all"),["prevent"]))}," \u5168\u90E8\u57CE\u5E02 ")])):(v(),h("div",at,[e("div",st,[e("a",{class:A(["border-b-2 border-[transparent] py-2 px-4",{"text-main":n.value==0}]),onClick:s[2]||(s[2]=l(a=>f(0),["prevent"])),href:"#"},"\u5317\u90E8",2),e("a",{class:A(["border-b-2 border-[transparent] py-2 px-4",{"text-main":n.value==1}]),onClick:s[3]||(s[3]=l(a=>f(1),["prevent"])),href:"#"},"\u4E2D\u90E8",2),e("a",{class:A(["border-b-2 border-[transparent] py-2 px-4",{"text-main":n.value==2}]),onClick:s[4]||(s[4]=l(a=>f(2),["prevent"])),href:"#"},"\u5357\u90E8",2),e("a",{class:A(["border-b-2 border-[transparent] py-2 px-4",{"text-main":n.value==3}]),onClick:s[5]||(s[5]=l(a=>f(3),["prevent"])),href:"#"},"\u6771\u90E8",2),e("a",{class:A(["border-b-2 border-[transparent] py-2 px-4",{"text-main":n.value==4}]),onClick:s[6]||(s[6]=l(a=>f(4),["prevent"])),href:"#"},"\u5916\u5CF6",2)]),e("div",nt,[e("div",lt,[rt,e("div",it,[(v(!0),h(P,null,N(u("north"),a=>(v(),h("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:l(E=>_(x).push(`/city/${a.value}`),["prevent"])},m(a.name),9,ct))),128))])]),e("div",ut,[dt,e("div",gt,[(v(!0),h(P,null,N(u("central"),a=>(v(),h("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:l(E=>_(x).push(`/city/${a.value}`),["prevent"])},m(a.name),9,pt))),128))])]),e("div",vt,[ht,e("div",mt,[(v(!0),h(P,null,N(u("south"),a=>(v(),h("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:l(E=>_(x).push(`/city/${a.value}`),["prevent"])},m(a.name),9,bt))),128))])]),e("div",xt,[yt,e("div",ft,[(v(!0),h(P,null,N(u("east"),a=>(v(),h("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:l(E=>_(x).push(`/city/${a.value}`),["prevent"])},m(a.name),9,kt))),128))])]),e("div",wt,[_t,e("div",$t,[(v(!0),h(P,null,N(u("island"),a=>(v(),h("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:l(E=>_(x).push(`/city/${a.value}`),["prevent"])},m(a.name),9,Ct))),128))])])])])),e("div",Tt,[be(b.$slots,"footer"),St])],64))}},Mt={class:"bg-white dark:bg-black relative mt-[48px]"},Dt={class:"flex items-center w-full p-3 text-black bg-white border-b-2 dark:text-white border-main dark:bg-black"},Pt={class:"text-center text-xl min-w-[100px]"},At=["disabled"],Lt=["disabled"],Nt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),Bt=[Nt],It=["onClick"],Rt={class:"text-xl font-bold"},jt={class:"text-right"},zt={class:"text-md"},Zt={class:"text-sm"},Ot={key:0,class:"h-[calc(50vh-108px)] p-3 grid grid-cols-5 grid-rows-4 gap-2"},Ht=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Vt=[Ht],Gt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M3 12l6.414 6.414a2 2 0 001.414.586H19a2 2 0 002-2V7a2 2 0 00-2-2h-8.172a2 2 0 00-1.414.586L3 12z"})],-1),Kt=[Gt],Ut={setup(i){const r=H(),x=V(),y=G(),{city:n}=x.params,u=k(),f=k([]);k(null);const C=k(!1),o=k(""),b=async()=>{r.dispatch("handLoadingToggle");try{const T=await Fe(n);f.value=T.data,r.dispatch("handLoadingToggle")}catch(T){console.log(T)}},s=T=>{F.forEach(t=>{t.value===n&&(u.value=t.name)})},a=()=>o.value===""?f.value:f.value.filter(t=>t.RouteName.Zh_tw.includes(o.value)),E=(T,t)=>{switch(T){case"clear":o.value="";break;case"back":o.value===""?o.value="":o.value=o.value.slice(0,-1);break;case"more":C.value=!0;let c=document.createElement("input");document.body.appendChild(c),c.focus(),setTimeout(()=>{document.getElementById("searchInput").focus(),document.getElementById("searchInput").click(),document.body.removeChild(c)},0);break}};return Y(()=>{b(),s()}),(T,t)=>(v(),h("div",Mt,[e("div",Dt,[e("p",Pt,m(u.value),1),j(e("input",{class:"w-full px-2 py-1 bg-white border border-gray-400 rounded dark:bg-black flex-2",placeholder:"\u641C\u5C0B\u516C\u8ECA\u865F",id:"searchInput",type:"text",disabled:!C.value,"onUpdate:modelValue":t[0]||(t[0]=c=>o.value=c)},null,8,At),[[xe,o.value]]),e("button",{class:A(["pl-2 text-center",{"text-transparent":!C.value,"text-main":C.value}]),onClick:t[1]||(t[1]=l(c=>C.value=!1,["prevent"])),disabled:!C.value},Bt,10,Lt)]),e("div",{class:A(["dark:text-white px-3 h-[50vh] overflow-y-scroll",{"h-[50vh]":!C.value,"h-[calc(100vh-108px)]":C.value}])},[(v(!0),h(P,null,N(a(),c=>(v(),h("a",{class:"flex items-center justify-between block p-3 my-3 duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:c.RouteID,onClick:l(W=>_(y).push(`/bus/${_(n)}/${c.RouteName.Zh_tw}`),["prevent"])},[e("p",Rt,m(c.RouteName.Zh_tw),1),e("div",jt,[e("p",zt,m(c.DepartureStopNameZh)+" - "+m(c.DestinationStopNameZh),1),e("p",Zt,m(c.SubRoutes[0].FirstBusTime?`${c.SubRoutes[0].FirstBusTime}-${c.SubRoutes[0].LastBusTime}`:"-"),1)])],8,It))),128))],2),C.value?Q("",!0):(v(),h("div",Ot,[e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[2]||(t[2]=l(c=>o.value+="\u7D05",["prevent"]))}," \u7D05 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[3]||(t[3]=l(c=>o.value+="\u85CD",["prevent"]))}," \u85CD "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[4]||(t[4]=l(c=>o.value+="1",["prevent"]))}," 1 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[5]||(t[5]=l(c=>o.value+="2",["prevent"]))}," 2 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[6]||(t[6]=l(c=>o.value+="3",["prevent"]))}," 3 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[7]||(t[7]=l(c=>o.value+="\u7DA0",["prevent"]))}," \u7DA0 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[8]||(t[8]=l(c=>o.value+="\u68D5",["prevent"]))}," \u68D5 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[9]||(t[9]=l(c=>o.value+="4",["prevent"]))}," 4 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[10]||(t[10]=l(c=>o.value+="5",["prevent"]))}," 5 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[11]||(t[11]=l(c=>o.value+="6",["prevent"]))}," 6 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[12]||(t[12]=l(c=>o.value+="\u6A58",["prevent"]))}," \u6A58 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[13]||(t[13]=l(c=>o.value+="\u5C0F",["prevent"]))}," \u5C0F "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[14]||(t[14]=l(c=>o.value+="7",["prevent"]))}," 7 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[15]||(t[15]=l(c=>o.value+="8",["prevent"]))}," 8 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[16]||(t[16]=l(c=>o.value+="9",["prevent"]))}," 9 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[17]||(t[17]=l(c=>E("more"),["prevent"]))}," \u66F4\u591A "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[18]||(t[18]=l(c=>o.value+="\u5E79\u7DDA",["prevent"]))}," \u5E79\u7DDA "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[19]||(t[19]=l(c=>E("clear"),["prevent"]))},Vt),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[20]||(t[20]=l(c=>o.value+="0",["prevent"]))}," 0 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[21]||(t[21]=l(c=>E("back"),["prevent"]))},Kt)]))]))}},ge=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];var pe="/taiwanbus/assets/marker.f63975cb.png";const Ft={class:"fixed top-[48px] max-w-md mx-auto w-full text-gray-400 bg-white dark:bg-black p-3"},Wt={class:"grid grid-cols-2 grid-rows-1"},qt={class:"py-2"},Yt={class:"text-xl text-main"},Xt={class:""},Jt={class:"text-sm text-right"},Qt={class:"flex items-center justify-end my-2"},eo={class:"grid grid-cols-2 grid-rows-1"},to={class:"mt-[166px]"},oo={class:"z-[5]"},ao=e("div",{class:"w-full h-[50vh]",id:"map"},null,-1),so=[ao],no=["onClick"],lo={key:1,class:"p-2 text-center text-white bg-gray-700 basis-1/3"},ro={class:"p-2 text-lg font-bold text-right rounded basis-2/3"},io={key:0,class:"fixed top-0 z-20 w-full h-full max-w-md mx-auto bg-black/50 backdrop-blur-md"},co={class:"relative w-full h-full"},uo={class:"absolute w-[90%] right-2/4 bottom-2/4 translate-x-2/4 translate-y-2/4 rounded-lg bg-white dark:bg-black"},go={class:"flex items-center justify-between p-2 text-lg text-gray-400 border-b"},po=e("p",null,"\u516C\u8ECA\u8CC7\u8A0A",-1),vo=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ho=[vo],mo={class:"p-3 text-black dark:text-white"},bo=e("p",{class:"text-lg text-main text-bold"},"\u982D\u672B\u73ED\u8ECA\uFF1A",-1),xo=e("p",{class:"text-lg text-main text-bold"},"\u6536\u8CBB\u65B9\u5F0F\uFF1A",-1),yo=e("p",{class:"text-lg text-main text-bold"},"\u5BA2\u904B\u696D\u8005\uFF1A",-1),fo={class:"text-center"},ko=["href"],wo={setup(i){const r=H(),x=V(),y=G();let n=!1;const{city:u,bus:f}=x.params,C=k(),o=k(0),b=k([]),s=k({}),a=k(Date.now()+30*1e3),E=k(),T=k(!1),t=k([]),c=k(!1),W=d=>{F.forEach(p=>{p.value===u&&(C.value=p.name)})},z=()=>{r.dispatch("handLoadingToggle"),ue(u,f).then(d=>{let p=d.data.sort((S,R)=>S.StopID-R.StopID),L=[];for(let S=0;S<p.length;S++)(S===0||p[S].StopID-p[0].StopID<1e4)&&L.push(p[S]);b.value=L,r.dispatch("handLoadingToggle")}).catch(d=>{console.log(d)})},Z=K(()=>r.getters.theme),X=async()=>{try{const d=await de(u,f);s.value=d.data[0]}catch(d){console.log(d)}},B=d=>{switch(Number(d)){case 1:return"\u5C1A\u672A\u767C\u8ECA";case 2:return"\u4EA4\u7BA1\u4E0D\u505C\u9760";case 3:return"\u672B\u73ED\u99DB\u96E2";case 4:return"\u4ECA\u65E5\u505C\u99DB"}},q=d=>d<60?"\u9032\u7AD9\u4E2D":d<180?"\u5373\u5C07\u9032\u7AD9":`${Math.ceil(d/60)-1}\u5206\u9418`,J=async()=>{try{const d=await We(u,f);t.value=d.data,z()}catch(d){console.log(d)}},O=()=>{try{let d=x.fullPath.toString(),p=d.indexOf("="),L=d.indexOf("=",p+1),S=d[p+1];o.value=S?1:0}catch(d){console.log(d)}},g=k({google:null,map:null,markers:null}),$=async d=>{const p=new ce({apiKey:"AIzaSyAFKPiMUc5jyVnzoWAJush-EDagXdyHgVc",version:"weekly",libraries:["places"],language:"zh-TW"});g.value.google=await p.load(),g.value.map=new g.value.google.maps.Map(document.getElementById("map"),{center:{lat:t.value[o.value].Stops[0].StopPosition.PositionLat,lng:t.value[o.value].Stops[0].StopPosition.PositionLon},zoom:16,maxZoom:20,minZoom:3,streetViewControl:!1,mapTypeControl:!1,disableDefaultUI:!0,styles:d?"":ge}),g.value.markers=[],t.value[o.value].Stops.forEach(S=>{let R={lat:S.StopPosition.PositionLat,lng:S.StopPosition.PositionLon};g.value.markers.push(R)}),new google.maps.Polyline({path:g.value.markers,geodesic:!0,strokeColor:"#F97316",strokeOpacity:1,strokeWeight:2}).setMap(g.value.map),w(g.value.map)},w=()=>{for(let p=0;p<t.value[o.value].Stops.length;p++)if(t.value[o.value].Stops[p].StopID-t.value[o.value].Stops[0].StopID<1e4){const L=new google.maps.InfoWindow({width:320,content:`<div class="w-full text-center min-w-[100px] min-h-[55px]">
        <p class="mb-3 font-bold text-md">${p+1}. ${t.value[o.value].Stops[p].StopName.Zh_tw}</p>
        <div>
        <a class="p-2 text-white rounded bg-main" href="/${u}/stop/${t.value[o.value].Stops[p].StopName.Zh_tw}">\u516C\u8ECA\u67E5\u8A62</a>
        </div>
        </div>`});var d={url:pe,scaledSize:new google.maps.Size(24,32)};const S=new google.maps.Marker({position:{lat:t.value[o.value].Stops[p].StopPosition.PositionLat,lng:t.value[o.value].Stops[p].StopPosition.PositionLon},icon:d,map:g.value.map});S.addListener("click",()=>{L.open({anchor:S,map:g.value.map})})}},D=()=>{setTimeout(()=>{if(n)return;const d=a.value-Date.now();E.value=Math.ceil((a.value-Date.now())/1e3),d<=0&&(z(),a.value=Date.now()+30*1e3),D()},1e3)};return oe(()=>r.getters.theme,(d,p)=>{$(d)}),Y(()=>{W(),J(),X(),D(),O()}),te(()=>{n=!0}),(d,p)=>{var L,S,R,ae,se,ne,le;return v(),h(P,null,[e("div",Ft,[e("div",Wt,[e("div",qt,[e("p",null,m(C.value)+"\uFF5C\u516C\u8ECA",1),e("p",Yt,m(_(f)),1)]),e("div",Xt,[e("p",Jt,m(E.value)+"\u79D2\u5F8C\u66F4\u65B0",1),e("div",Qt,[e("button",{class:"p-2 mr-2 text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:p[0]||(p[0]=l(M=>c.value=!0,["prevent"]))}," \u516C\u8ECA\u8CC7\u8A0A "),e("button",{id:"testt",class:"p-2 text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:p[1]||(p[1]=l(M=>{T.value=!T.value,$(_(Z))},["prevent"]))},m(T.value?"\u5730\u5716\u95DC\u9589":"\u5730\u5716\u986F\u793A"),1)])])]),e("div",eo,[e("button",{class:A(["truncate border-b-2",{"border-main":o.value==0,"text-main":o.value==0,"border-transparent":o.value!=0}]),onClick:p[2]||(p[2]=l(M=>{o.value=0,$(_(Z))},["prevent"]))},m(`\u5F80${s.value.DestinationStopNameZh}`),3),e("button",{class:A(["truncate border-b-2",{"border-main":o.value==1,"text-main":o.value==1,"border-transparent":o.value!=1}]),onClick:p[3]||(p[3]=l(M=>{o.value=1,$(_(Z))},["prevent"]))},m(`\u5F80${s.value.DepartureStopNameZh}`),3)])]),e("div",to,[j(e("div",oo,so,512),[[U,T.value]]),e("div",{class:A(["px-3 overflow-y-scroll bg-white dark:bg-black dark:text-white",{"max-h-[calc(50vh-164px)]":T.value}])},[(v(!0),h(P,null,N(b.value,M=>j((v(),h("a",{key:M.StopID,class:"flex flex-row block my-3 overflow-hidden bg-gray-200 rounded-lg dark:bg-gray-800 items-inherit",onClick:l(zo=>_(y).push(`/stop/${_(u)}/${M.StopName.Zh_tw}`),["prevent"])},[M.StopStatus===0?(v(),h("div",{key:0,class:A(["p-2 text-center text-white basis-1/3",{"bg-main":M.EstimateTime<60,"bg-main/75":M.EstimateTime<=180&&M.EstimateTime>=60,"bg-gray-500":M.EstimateTime>181}])},[e("p",null,m(q(M.EstimateTime)),1)],2)):(v(),h("div",lo,[e("p",null,m(B(M.StopStatus)),1)])),e("p",ro,m(M.StopName.Zh_tw),1)],8,no)),[[U,M.Direction==o.value]])),128))],2)]),c.value?(v(),h("div",io,[e("div",co,[e("div",uo,[e("div",go,[po,e("div",{onClick:p[4]||(p[4]=M=>c.value=!1)},ho)]),e("div",mo,[bo,e("p",null,"\u5E73\u65E5\uFF1A"+m((L=s.value)==null?void 0:L.SubRoutes[0].FirstBusTime)+"-"+m((S=s.value)==null?void 0:S.SubRoutes[0].LastBusTime),1),e("p",null,"\u5047\u65E5\uFF1A"+m((R=s.value)==null?void 0:R.SubRoutes[0].HolidayFirstBusTime)+"-"+m((ae=s.value)==null?void 0:ae.SubRoutes[0].HolidayLastBusTime),1),xo,e("p",null,m(((se=s.value)==null?void 0:se.TicketPriceDescriptionZh)||"-"),1),yo,e("p",null,m((ne=s.value.Operators[0])==null?void 0:ne.OperatorName.Zh_tw),1),e("div",fo,[e("a",{class:"inline-block px-3 py-2 text-white rounded bg-main",target:"_blank",href:(le=s.value)==null?void 0:le.RouteMapImageUrl},"\u8A73\u7D30\u8CC7\u8A0A",8,ko)])])])])])):Q("",!0)],64)}}},_o={class:"fixed top-[48px] max-w-md mx-auto w-full text-gray-400 bg-white dark:bg-black p-3"},$o={class:"flex items-center justify-between"},Co={class:"py-2"},To={class:"text-xl text-main"},So={class:"text-sm text-right"},Eo={class:"mt-[140px]"},Mo={class:"z-[5]"},Do=e("div",{class:"w-full h-[50vh]",id:"map"},null,-1),Po=[Do],Ao=["onClick"],Lo={key:1,class:"p-2 text-center text-white bg-gray-700 basis-1/3"},No={class:"p-2 text-lg font-bold truncate rounded basis-2/3"},Bo={setup(i){const r=H(),x=V(),y=G(),{city:n,stop:u}=x.params,f=k(),C=k([]),o=K(()=>r.getters.theme),b=k([]);let s=!1;const a=k(Date.now()+30*1e3),E=k(),T=k({lat:"",lon:""}),t=k(!1),c=g=>{F.forEach($=>{$.value===n&&(f.value=$.name)})},W=g=>g<60?"\u9032\u7AD9\u4E2D":g<180?"\u5373\u5C07\u9032\u7AD9":`${Math.ceil(g/60)-1}\u5206\u9418`,z=()=>{r.dispatch("handLoadingToggle");const g=[];C.value.forEach($=>{ue(n,$.RouteName.Zh_tw).then(w=>{w.data.forEach(D=>{D.StopName.Zh_tw===u&&de(n,$.RouteName.Zh_tw).then(d=>{D.Direction?D.Direction_text=d.data[0].DepartureStopNameZh:D.Direction_text=d.data[0].DestinationStopNameZh,g.push(D)}).catch(d=>{console.log(d)})})}).catch(w=>{console.log(w)})}),b.value=g,r.dispatch("handLoadingToggle")},Z=async()=>{try{const g=await Ye(n,u);T.value.lat=g.data[0].StopPosition.PositionLat,T.value.lon=g.data[0].StopPosition.PositionLon}catch(g){console.log(g)}},X=async()=>{try{const g=await qe(n,u);let $=[];g.data.forEach(w=>{$.map(d=>d.RouteName.Zh_tw).indexOf(w.RouteName.Zh_tw)===-1&&$.push(w)}),C.value=$,z()}catch(g){console.log(g)}},B=k({google:null,map:null,markers:null}),q=async g=>{const $=new ce({apiKey:"AIzaSyAFKPiMUc5jyVnzoWAJush-EDagXdyHgVc",version:"weekly",libraries:["places"],language:"zh-TW"});B.value.google=await $.load(),B.value.map=new B.value.google.maps.Map(document.getElementById("map"),{center:{lat:T.value.lat,lng:T.value.lon},zoom:16,maxZoom:20,minZoom:3,streetViewControl:!1,mapTypeControl:!1,disableDefaultUI:!0,styles:g?"":ge});const w=new google.maps.InfoWindow({content:`<div class="w-full font-bold text-center text-md">${u}</div>`}),D=new google.maps.Marker({position:B.value.map.getCenter(),icon:{url:pe,scaledSize:new google.maps.Size(24,32)},map:B.value.map});D.addListener("click",()=>{w.open({anchor:D,map:B.value.map})})},J=g=>{switch(g){case 1:return"\u5C1A\u672A\u767C\u8ECA";case 2:return"\u4EA4\u7BA1\u4E0D\u505C\u9760";case 3:return"\u672B\u73ED\u99DB\u96E2";case 4:return"\u4ECA\u65E5\u505C\u99DB"}},O=()=>{setTimeout(()=>{if(s)return;const g=a.value-Date.now();E.value=Math.ceil((a.value-Date.now())/1e3),g<=0&&(z(),a.value=Date.now()+30*1e3),O()},1e3)};return oe(()=>r.getters.theme,(g,$)=>{q(g)}),Y(()=>{c(),Z(),X(),O(),te(()=>{s=!0})}),(g,$)=>(v(),h(P,null,[e("div",_o,[e("div",$o,[e("div",Co,[e("p",null,m(f.value)+"\uFF5C\u7AD9\u724C",1),e("p",To,m(_(u)),1)]),e("div",null,[e("p",So,m(E.value)+"\u79D2\u5F8C\u66F4\u65B0",1),e("button",{class:"p-2 my-2 text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:$[0]||($[0]=l(w=>{t.value=!t.value,q(_(o))},["prevent"]))},m(t.value?"\u5730\u5716\u95DC\u9589":"\u5730\u5716\u986F\u793A"),1)])])]),e("div",Eo,[j(e("div",Mo,Po,512),[[U,t.value]]),e("div",{class:A(["bg-white dark:bg-black dark:text-white px-3 overflow-y-scroll h-[calc(100vh-140px)]",{"max-h-[calc(50vh-140px)]":t.value}])},[(v(!0),h(P,null,N(b.value,w=>(v(),h("a",{class:"flex flex-row block my-3 overflow-hidden bg-gray-200 rounded-lg dark:bg-gray-800 items-inherit",onClick:l(D=>_(y).push(`/bus/${_(n)}/${w.RouteName.Zh_tw}?direction=${w.Direction}&stop=${_(u)}`),["prevent"]),key:w.RouteID},[w.StopStatus===0?(v(),h("div",{key:0,class:A(["p-2 text-center text-white basis-1/3",{"bg-main":w.EstimateTime<60,"bg-main/75":w.EstimateTime<=180&&w.EstimateTime>=60,"bg-gray-500":w.EstimateTime>181}])},[e("p",null,m(W(w.EstimateTime)),1)],2)):(v(),h("div",Lo,[e("p",null,m(J(w.StopStatus)),1)])),e("p",No,m(`${w.RouteName.Zh_tw}-\u5F80${w.Direction_text}`),1)],8,Ao))),128))],2)])],64))}},Io=[{path:"/",name:"Home",component:Et},{path:"/city/:city",name:"City",component:Ut},{path:"/bus/:city/:bus",name:"Bus",component:wo},{path:"/stop/:city/:stop",name:"Stop",component:Bo}];var Ro=ye({history:fe(),routes:Io});const jo=ke({state(){return{loading:!1,theme:!0}},actions:{handLoadingToggle(i){i.commit("loadingToggle")},handThemeSet(i,r){i.commit("themeSet",r)}},mutations:{loadingToggle(i){i.loading=!i.loading},themeSet(i,r){i.theme=r}},getters:{loading(i){return i.loading},theme(i){return i.theme}}});we(Ke).use(Ro).use(jo).mount("#app");
