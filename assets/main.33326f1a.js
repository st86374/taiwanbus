import{o as p,c as m,a as ge,u as G,b as K,r as fe,w as z,v as U,d as _,e as Z,f as e,F as A,g as ke,j as we,h as se,i as F,k as W,l as i,m as ne,n as pe,p as k,q as J,s as le,t as re,x as Q,y as I,z as B,A as P,B as h,C as _e,L as ve,D as $e,E as Ce,G as Te,H as Se}from"./vendor.a7193e74.js";const Ee=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))y(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&y(f)}).observe(document,{childList:!0,subtree:!0});function x(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerpolicy&&(u.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?u.credentials="include":r.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function y(r){if(r.ep)return;r.ep=!0;const u=x(r);fetch(r.href,u)}};Ee();var he=(n,l)=>{const x=n.__vccOpts||n;for(const[y,r]of l)x[y]=r;return x};const Me={},De={class:"w-screen h-screen z-30 text-white bg-black/50 backdrop-blur-md flex items-center justify-center fixed top-0 left-0"},Pe=ge('<div><p class="flex-1 text-center text-2xl font-bold italic"><span class="text-main text-2xl font-bold italic">T</span>aiwan<span class="text-main text-2xl font-bold italic">B</span>us </p><div class="my-3 flex items-center justify-center space-x-2 animate-pulse"><div class="w-4 h-4 bg-orange-400 rounded-full"></div><div class="w-4 h-4 bg-orange-400 rounded-full"></div><div class="w-4 h-4 bg-orange-400 rounded-full"></div></div><p class="text-center">\u8CC7\u6599\u8B80\u53D6\u4E2D</p></div>',1),Ae=[Pe];function Le(n,l){return p(),m("div",De,Ae)}var Be=he(Me,[["render",Le]]);const Ne={class:"max-w-md mx-auto"},Ie={setup(n){const l=G(),x=K(()=>l.getters.loading);return(y,r)=>{const u=fe("router-view");return p(),m(A,null,[z(Z(Be,null,null,512),[[U,_(x)]]),e("div",Ne,[Z(u)])],64)}}},q=[{name:"\u81FA\u5317\u5E02",value:"Taipei",municipality:!0,area:"north"},{name:"\u65B0\u5317\u5E02",value:"NewTaipei",municipality:!0,area:"north"},{name:"\u6843\u5712\u5E02",value:"Taoyuan",municipality:!0,area:"north"},{name:"\u81FA\u4E2D\u5E02",value:"Taichung",municipality:!0,area:"central"},{name:"\u81FA\u5357\u5E02",value:"Tainan",municipality:!0,area:"south"},{name:"\u9AD8\u96C4\u5E02",value:"Kaohsiung",municipality:!0,area:"south"},{name:"\u57FA\u9686\u5E02",value:"Keelung",municipality:!1,area:"north"},{name:"\u65B0\u7AF9\u5E02",value:"Hsinchu",municipality:!1,area:"north"},{name:"\u65B0\u7AF9\u7E23",value:"HsinchuCounty",municipality:!1,area:"north"},{name:"\u82D7\u6817\u7E23",value:"MiaoliCounty",municipality:!1,area:"central"},{name:"\u5F70\u5316\u7E23",value:"ChanghuaCounty",municipality:!1,area:"central"},{name:"\u5357\u6295\u7E23",value:"NantouCounty",municipality:!1,area:"central"},{name:"\u96F2\u6797\u7E23",value:"YunlinCounty",municipality:!1,area:"central"},{name:"\u5609\u7FA9\u7E23",value:"ChiayiCounty",municipality:!1,area:"south"},{name:"\u5609\u7FA9\u5E02",value:"Chiayi",municipality:!1,area:"south"},{name:"\u5C4F\u6771\u7E23",value:"PingtungCounty",municipality:!1,area:"south"},{name:"\u5B9C\u862D\u7E23",value:"YilanCounty",municipality:!1,area:"north"},{name:"\u82B1\u84EE\u7E23",value:"HualienCounty",municipality:!1,area:"east"},{name:"\u81FA\u6771\u7E23",value:"TaitungCounty",municipality:!1,area:"east"},{name:"\u91D1\u9580\u7E23",value:"KinmenCounty",municipality:!1,area:"island"},{name:"\u6F8E\u6E56\u7E23",value:"PenghuCounty",municipality:!1,area:"island"},{name:"\u9023\u6C5F\u7E23",value:"LienchiangCounty",municipality:!1,area:"island"}],R=ke.create({baseURL:"https://ptx.transportdata.tw/MOTC/v2/Bus/"}),Re=()=>{const n="af3a01e61d284651b860be124d87fe65",l="NblqJVsM9mca0s-oZfmWJ-PDspY",x=new Date().toUTCString(),y=new we("SHA-1","TEXT");y.setHMACKey(l,"TEXT"),y.update("x-date: "+x);const r=y.getHMAC("B64");return{Authorization:'hmac username="'+n+'", algorithm="hmac-sha1", headers="x-date", signature="'+r+'"',"X-Date":x}};R.interceptors.request.use(n=>(n.headers=Re(),n),n=>Promise.reject(n));const je=n=>R.get(`Route/City/${n}`),me=(n,l)=>R.get(`EstimatedTimeOfArrival/City/${n}/${l}`),ze=(n,l)=>R.get(`StopOfRoute/City/${n}/${l}`),Ze=(n,l)=>R.get(`StopOfRoute/City/${n}?$filter=Stops/any(c: c/StopName/Zh_tw eq '${l}')`),be=(n,l)=>R.get(`Route/City/${n}/${l}`),Oe=(n,l)=>R.get(`Stop/City/${n}?$filter=StopName/Zh_tw eq '${l}'`),He={},Ve={class:"header max-w-md mx-auto fixed top-0 left-0 right-0 z-10"},Ge={class:"body"};function Ke(n,l){return p(),m(A,null,[e("div",Ve,[se(n.$slots,"header")]),e("div",Ge,[se(n.$slots,"body")])],64)}var ee=he(He,[["render",Ke]]);const Ue={class:"relative flex items-center justify-center w-full p-2 text-gray-400 bg-white dark:bg-black"},Fe=e("div",{class:"absolute top-0 right-0 left-0 bottom-0 z-[-1]"},null,-1),We={class:"flex-1"},qe=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ye=[qe],Xe=e("h1",{class:"flex-1 text-2xl italic font-bold text-center"},[e("span",{class:"text-2xl italic font-bold text-main"},"T"),pe("aiwan"),e("span",{class:"text-2xl italic font-bold text-main"},"B"),pe("us ")],-1),Je=[Xe],Qe={class:"flex items-center justify-end flex-1"},et={for:"toggleTheme",class:"flex items-center cursor-pointer"},tt={class:"relative"},ot=["checked"],at=ge('<div class="block h-8 bg-gray-600 rounded-full w-14"></div><svg xmlns="http://www.w3.org/2000/svg" class="moon h-6 w-6 absolute text-white right-[3px] bottom-2/4 translate-y-2/4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="sun h-6 w-6 absolute text-white left-[3px] bottom-2/4 translate-y-2/4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><div id="toggleDot" class="absolute w-6 h-6 transition bg-white rounded-full dot left-1 top-1"></div>',4),te={setup(n){const l=G(),x=F(),y=W();K(()=>l.getters.theme);const r=K(()=>!document.documentElement.classList.contains("dark"));o();const u=b=>{y.go(b)},f=()=>{x.path==="/"?window.location.hash="":(y.push("/"),console.log("check"))},C=b=>{document.getElementById("toggleDot"),b.currentTarget.checked?(document.documentElement.classList.remove("dark"),l.dispatch("handThemeSet",!0)):(document.documentElement.classList.add("dark"),l.dispatch("handThemeSet",!1))};function o(){return"matchMedia"in window?matchMedia("(prefers-color-scheme: dark)").matches:void 0}return(b,s)=>(p(),m("header",Ue,[Fe,e("div",We,[_(x).path!="/"?(p(),m("a",{key:0,onClick:s[0]||(s[0]=i(a=>u(-1),["prevent"])),href:"#"},Ye)):ne("",!0)]),e("a",{href:"#",onClick:s[1]||(s[1]=i(a=>f(),["prevent"]))},Je),e("div",Qe,[e("label",et,[e("div",tt,[e("input",{checked:_(r),type:"checkbox",id:"toggleTheme",class:"sr-only",onChange:s[2]||(s[2]=a=>C(a))},null,40,ot),at])])])]))}},st={class:"bg-top bg-cover bg-no-repeat bg-[url('@/assets/img/banner-2.jpeg')] dark:bg-[url('@/assets/img/banner.jpeg')] w-full min-h-[calc(50vh-40px)] relative overflow-hidden"},nt=e("div",{class:"absolute w-full h-[30px] scale-150 bg-white dark:bg-black bottom-[-20px] blur-sm"},null,-1),lt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),rt=[lt],it={key:0,class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 grid-rows-4 p-2 min-h-[50vh]"},ct=["onClick"],ut={key:1},dt={class:"sticky top-[47px] flex items-center bg-white dark:bg-black dark:text-white"},gt={class:"text-black bg-white dark:text-white dark:bg-black"},pt={class:"js-block",id:"north"},vt=e("h2",{class:"p-2 mx-3 text-2xl font-bold text-main"},"\u5317\u90E8",-1),ht={class:"dark:text-white text-xl gap-2 grid grid-flow-row-dense grid-cols-2 grid-rows-4 p-2 min-h-[50vh]"},mt=["onClick"],bt={class:"js-block",id:"central"},xt=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u4E2D\u90E8",-1),yt={class:"text-xl gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[37.5vh]"},ft=["onClick"],kt={class:"js-block",id:"south"},wt=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u5357\u90E8",-1),_t={class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[37.5vh]"},$t=["onClick"],Ct={class:"js-block",id:"east"},Tt=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u6771\u90E8",-1),St={class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[12.5vh]"},Et=["onClick"],Mt={class:"js-block",id:"island"},Dt=e("h2",{class:"mx-3 text-2xl font-bold text-main"},"\u5916\u5CF6",-1),Pt={class:"dark:text-white text-xl bg-white dark:bg-black gap-2 grid grid-flow-row-dense grid-cols-2 p-2 min-h-[25vh]"},At=["onClick"],Lt={class:"p-2 text-center text-gray-400 bg-white footer dark:bg-black"},Bt=e("p",null,"Copyright\xA92022 TangYuCheng",-1),Nt={setup(n){const l=F(),x=W(),y=k("home"),r=k(-1);J(()=>{window.addEventListener("scroll",C)}),le(()=>{window.removeEventListener("scroll",C)});const u=b=>{let s;return b?s=q.filter(a=>a.area===b):s=q.filter(a=>a.municipality),s},f=b=>{if(b>-1){const s=document.querySelectorAll(".js-block");scrollTo(s[b].offsetTop,s[b].offsetTop-90),setTimeout(()=>{r.value=b},500)}else scrollTo(window.offsetTop,window.offsetTop)},C=b=>{b=document.documentElement;const s=document.querySelectorAll(".js-block");for(let a=s.length-1;a>=0;a--)if(b.scrollTop-100>=s[a].offsetTop-s[0].offsetTop){r.value=a;break}},o=b=>{y.value=b,b==="all"?(window.location.hash="all",y.value="all",setTimeout(()=>{f(0)},0)):(window.location.hash="",y.value="home")};return re(()=>l.hash,(b,s)=>{s?y.value="home":y.value="all"}),(b,s)=>(p(),Q(ee,null,{header:I(()=>[Z(te)]),body:I(()=>[e("div",st,[nt,z(e("a",{class:"fixed z-10 left-[8px] top-[8px] text-gray-400",onClick:s[0]||(s[0]=i(a=>(o("home"),f(-1)),["prevent"])),href:"#"},rt,512),[[U,y.value=="all"]])]),y.value==="home"?(p(),m("div",it,[(p(!0),m(A,null,B(u(),a=>(p(),m("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:i(E=>_(x).push(`/city/${a.value}`),["prevent"])},h(a.name),9,ct))),128)),e("button",{class:"col-span-2 duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",onClick:s[1]||(s[1]=i(a=>o("all"),["prevent"]))}," \u5168\u90E8\u57CE\u5E02 ")])):(p(),m("div",ut,[e("div",dt,[e("a",{class:P(["border-b-2 border-[transparent] py-2 px-4",{"text-main":r.value==0}]),onClick:s[2]||(s[2]=i(a=>f(0),["prevent"])),href:"#"},"\u5317\u90E8",2),e("a",{class:P(["border-b-2 border-[transparent] py-2 px-4",{"text-main":r.value==1}]),onClick:s[3]||(s[3]=i(a=>f(1),["prevent"])),href:"#"},"\u4E2D\u90E8",2),e("a",{class:P(["border-b-2 border-[transparent] py-2 px-4",{"text-main":r.value==2}]),onClick:s[4]||(s[4]=i(a=>f(2),["prevent"])),href:"#"},"\u5357\u90E8",2),e("a",{class:P(["border-b-2 border-[transparent] py-2 px-4",{"text-main":r.value==3}]),onClick:s[5]||(s[5]=i(a=>f(3),["prevent"])),href:"#"},"\u6771\u90E8",2),e("a",{class:P(["border-b-2 border-[transparent] py-2 px-4",{"text-main":r.value==4}]),onClick:s[6]||(s[6]=i(a=>f(4),["prevent"])),href:"#"},"\u5916\u5CF6",2)]),e("div",gt,[e("div",pt,[vt,e("div",ht,[(p(!0),m(A,null,B(u("north"),a=>(p(),m("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:i(E=>_(x).push(`/city/${a.value}`),["prevent"])},h(a.name),9,mt))),128))])]),e("div",bt,[xt,e("div",yt,[(p(!0),m(A,null,B(u("central"),a=>(p(),m("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:i(E=>_(x).push(`/city/${a.value}`),["prevent"])},h(a.name),9,ft))),128))])]),e("div",kt,[wt,e("div",_t,[(p(!0),m(A,null,B(u("south"),a=>(p(),m("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:i(E=>_(x).push(`/city/${a.value}`),["prevent"])},h(a.name),9,$t))),128))])]),e("div",Ct,[Tt,e("div",St,[(p(!0),m(A,null,B(u("east"),a=>(p(),m("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:i(E=>_(x).push(`/city/${a.value}`),["prevent"])},h(a.name),9,Et))),128))])]),e("div",Mt,[Dt,e("div",Pt,[(p(!0),m(A,null,B(u("island"),a=>(p(),m("button",{class:"duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:a.value,onClick:i(E=>_(x).push(`/city/${a.value}`),["prevent"])},h(a.name),9,At))),128))])])])])),e("div",Lt,[se(b.$slots,"footer"),Bt])]),_:3}))}},It={class:"bg-white dark:bg-black relative mt-[48px]"},Rt={class:"flex items-center w-full p-3 text-black bg-white border-b-2 dark:text-white border-main dark:bg-black"},jt={class:"text-center text-xl min-w-[100px]"},zt=["disabled"],Zt=["disabled"],Ot=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),Ht=[Ot],Vt=["onClick"],Gt={class:"text-xl font-bold"},Kt={class:"text-right"},Ut={class:"text-md"},Ft={class:"text-sm"},Wt={key:0,class:"h-[calc(50vh-108px)] p-3 grid grid-cols-5 grid-rows-4 gap-2"},qt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Yt=[qt],Xt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M3 12l6.414 6.414a2 2 0 001.414.586H19a2 2 0 002-2V7a2 2 0 00-2-2h-8.172a2 2 0 00-1.414.586L3 12z"})],-1),Jt=[Xt],Qt={setup(n){const l=G(),x=F(),y=W(),{city:r}=x.params,u=k(),f=k([]);k(null);const C=k(!1),o=k(""),b=async()=>{l.dispatch("handLoadingToggle");try{const T=await je(r);f.value=T.data,l.dispatch("handLoadingToggle")}catch(T){console.log(T)}},s=T=>{q.forEach(t=>{t.value===r&&(u.value=t.name)})},a=()=>o.value===""?f.value:f.value.filter(t=>t.RouteName.Zh_tw.includes(o.value)),E=(T,t)=>{switch(T){case"clear":o.value="";break;case"back":o.value===""?o.value="":o.value=o.value.slice(0,-1);break;case"more":C.value=!0;let c=document.createElement("input");document.body.appendChild(c),c.focus(),setTimeout(()=>{document.getElementById("searchInput").focus(),document.getElementById("searchInput").click(),document.body.removeChild(c)},0);break}};return J(()=>{b(),s()}),(T,t)=>(p(),Q(ee,null,{header:I(()=>[Z(te)]),body:I(()=>[e("div",It,[e("div",Rt,[e("p",jt,h(u.value),1),z(e("input",{class:"w-full px-2 py-1 bg-white border border-gray-400 rounded dark:bg-black flex-2",placeholder:"\u641C\u5C0B\u516C\u8ECA\u865F",id:"searchInput",type:"text",disabled:!C.value,"onUpdate:modelValue":t[0]||(t[0]=c=>o.value=c)},null,8,zt),[[_e,o.value]]),e("button",{class:P(["pl-2 text-center",{"text-transparent":!C.value,"text-main":C.value}]),onClick:t[1]||(t[1]=i(c=>C.value=!1,["prevent"])),disabled:!C.value},Ht,10,Zt)]),e("div",{class:P(["dark:text-white px-3 h-[50vh] overflow-y-scroll",{"h-[50vh]":!C.value,"h-[calc(100vh-108px)]":C.value}])},[(p(!0),m(A,null,B(a(),c=>(p(),m("a",{class:"flex items-center justify-between block p-3 my-3 duration-300 ease-in-out bg-gray-200 rounded-lg dark:bg-gray-800 hover:bg-main hover:text-white",key:c.RouteID,onClick:i(Y=>_(y).push(`/bus/${_(r)}/${c.RouteName.Zh_tw}`),["prevent"])},[e("p",Gt,h(c.RouteName.Zh_tw),1),e("div",Kt,[e("p",Ut,h(c.DepartureStopNameZh)+" - "+h(c.DestinationStopNameZh),1),e("p",Ft,h(c.SubRoutes[0].FirstBusTime?`${c.SubRoutes[0].FirstBusTime}-${c.SubRoutes[0].LastBusTime}`:"-"),1)])],8,Vt))),128))],2),C.value?ne("",!0):(p(),m("div",Wt,[e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[2]||(t[2]=i(c=>o.value+="\u7D05",["prevent"]))}," \u7D05 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[3]||(t[3]=i(c=>o.value+="\u85CD",["prevent"]))}," \u85CD "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[4]||(t[4]=i(c=>o.value+="1",["prevent"]))}," 1 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[5]||(t[5]=i(c=>o.value+="2",["prevent"]))}," 2 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[6]||(t[6]=i(c=>o.value+="3",["prevent"]))}," 3 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[7]||(t[7]=i(c=>o.value+="\u7DA0",["prevent"]))}," \u7DA0 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[8]||(t[8]=i(c=>o.value+="\u68D5",["prevent"]))}," \u68D5 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[9]||(t[9]=i(c=>o.value+="4",["prevent"]))}," 4 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[10]||(t[10]=i(c=>o.value+="5",["prevent"]))}," 5 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[11]||(t[11]=i(c=>o.value+="6",["prevent"]))}," 6 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[12]||(t[12]=i(c=>o.value+="\u6A58",["prevent"]))}," \u6A58 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[13]||(t[13]=i(c=>o.value+="\u5C0F",["prevent"]))}," \u5C0F "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[14]||(t[14]=i(c=>o.value+="7",["prevent"]))}," 7 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[15]||(t[15]=i(c=>o.value+="8",["prevent"]))}," 8 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[16]||(t[16]=i(c=>o.value+="9",["prevent"]))}," 9 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[17]||(t[17]=i(c=>E("more"),["prevent"]))}," \u66F4\u591A "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[18]||(t[18]=i(c=>o.value+="\u5E79\u7DDA",["prevent"]))}," \u5E79\u7DDA "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[19]||(t[19]=i(c=>E("clear"),["prevent"]))},Yt),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[20]||(t[20]=i(c=>o.value+="0",["prevent"]))}," 0 "),e("button",{class:"text-lg font-bold text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:t[21]||(t[21]=i(c=>E("back"),["prevent"]))},Jt)]))])]),_:1}))}},xe=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}];var ye="/assets/marker.f63975cb.png";const eo={class:"fixed top-[48px] max-w-md mx-auto w-full text-gray-400 bg-white dark:bg-black p-3"},to={class:"grid grid-cols-2 grid-rows-1"},oo={class:"py-2"},ao={class:"text-xl text-main"},so={class:""},no={class:"text-sm text-right"},lo={class:"flex items-center justify-end my-2"},ro={class:"grid grid-cols-2 grid-rows-1"},io={class:"mt-[166px]"},co={class:"z-[5]"},uo=e("div",{class:"w-full h-[50vh]",id:"map"},null,-1),go=[uo],po=["onClick"],vo={key:1,class:"p-2 text-center text-white bg-gray-700 basis-1/3"},ho={class:"p-2 text-lg font-bold text-right rounded basis-2/3"},mo={key:0,class:"fixed top-0 z-20 w-full h-full max-w-md mx-auto bg-black/50 backdrop-blur-md"},bo={class:"relative w-full h-full"},xo={class:"absolute w-[90%] right-2/4 bottom-2/4 translate-x-2/4 translate-y-2/4 rounded-lg bg-white dark:bg-black"},yo={class:"flex items-center justify-between p-2 text-lg text-gray-400 border-b"},fo=e("p",null,"\u516C\u8ECA\u8CC7\u8A0A",-1),ko=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),wo=[ko],_o={class:"p-3 text-black dark:text-white"},$o=e("p",{class:"text-lg text-main text-bold"},"\u982D\u672B\u73ED\u8ECA\uFF1A",-1),Co=e("p",{class:"text-lg text-main text-bold"},"\u6536\u8CBB\u65B9\u5F0F\uFF1A",-1),To=e("p",{class:"text-lg text-main text-bold"},"\u5BA2\u904B\u696D\u8005\uFF1A",-1),So={class:"text-center"},Eo=["href"],Mo={setup(n){const l=G(),x=F(),y=W();let r=!1;const{city:u,bus:f}=x.params,C=k(),o=k(0),b=k([]),s=k({}),a=k(Date.now()+30*1e3),E=k(),T=k(!1),t=k([]),c=k(!1),Y=d=>{q.forEach(v=>{v.value===u&&(C.value=v.name)})},O=()=>{l.dispatch("handLoadingToggle"),me(u,f).then(d=>{let v=d.data.sort((S,j)=>S.StopID-j.StopID),L=[];for(let S=0;S<v.length;S++)(S===0||v[S].StopID-v[0].StopID<1e4)&&L.push(v[S]);b.value=L,l.dispatch("handLoadingToggle")}).catch(d=>{console.log(d)})},H=K(()=>l.getters.theme),oe=async()=>{try{const d=await be(u,f);s.value=d.data[0]}catch(d){console.log(d)}},N=d=>{switch(Number(d)){case 1:return"\u5C1A\u672A\u767C\u8ECA";case 2:return"\u4EA4\u7BA1\u4E0D\u505C\u9760";case 3:return"\u672B\u73ED\u99DB\u96E2";case 4:return"\u4ECA\u65E5\u505C\u99DB"}},X=d=>d<60?"\u9032\u7AD9\u4E2D":d<180?"\u5373\u5C07\u9032\u7AD9":`${Math.ceil(d/60)-1}\u5206\u9418`,ae=async()=>{try{const d=await ze(u,f);t.value=d.data,O()}catch(d){console.log(d)}},V=()=>{try{let d=x.fullPath.toString(),v=d.indexOf("="),L=d.indexOf("=",v+1),S=d[v+1];o.value=S?1:0}catch(d){console.log(d)}},g=k({google:null,map:null,markers:null}),$=async d=>{const v=new ve({apiKey:"AIzaSyAFKPiMUc5jyVnzoWAJush-EDagXdyHgVc",version:"weekly",libraries:["places"],language:"zh-TW"});g.value.google=await v.load(),g.value.map=new g.value.google.maps.Map(document.getElementById("map"),{center:{lat:t.value[o.value].Stops[0].StopPosition.PositionLat,lng:t.value[o.value].Stops[0].StopPosition.PositionLon},zoom:16,maxZoom:20,minZoom:3,streetViewControl:!1,mapTypeControl:!1,disableDefaultUI:!0,styles:d?"":xe}),g.value.markers=[],t.value[o.value].Stops.forEach(S=>{let j={lat:S.StopPosition.PositionLat,lng:S.StopPosition.PositionLon};g.value.markers.push(j)}),new google.maps.Polyline({path:g.value.markers,geodesic:!0,strokeColor:"#F97316",strokeOpacity:1,strokeWeight:2}).setMap(g.value.map),w(g.value.map)},w=()=>{for(let v=0;v<t.value[o.value].Stops.length;v++)if(t.value[o.value].Stops[v].StopID-t.value[o.value].Stops[0].StopID<1e4){const L=new google.maps.InfoWindow({width:320,content:`<div class="w-full text-center min-w-[100px] min-h-[55px]">
        <p class="mb-3 font-bold text-md">${v+1}. ${t.value[o.value].Stops[v].StopName.Zh_tw}</p>
        <div>
        <a class="p-2 text-white rounded bg-main" href="/${u}/stop/${t.value[o.value].Stops[v].StopName.Zh_tw}">\u516C\u8ECA\u67E5\u8A62</a>
        </div>
        </div>`});var d={url:ye,scaledSize:new google.maps.Size(24,32)};const S=new google.maps.Marker({position:{lat:t.value[o.value].Stops[v].StopPosition.PositionLat,lng:t.value[o.value].Stops[v].StopPosition.PositionLon},icon:d,map:g.value.map});S.addListener("click",()=>{L.open({anchor:S,map:g.value.map})})}},D=()=>{setTimeout(()=>{if(r)return;const d=a.value-Date.now();E.value=Math.ceil((a.value-Date.now())/1e3),d<=0&&(O(),a.value=Date.now()+30*1e3),D()},1e3)};return re(()=>l.getters.theme,(d,v)=>{$(d)}),J(()=>{Y(),ae(),oe(),D(),V()}),le(()=>{r=!0}),(d,v)=>(p(),Q(ee,null,{header:I(()=>[Z(te)]),body:I(()=>{var L,S,j,ie,ce,ue,de;return[e("div",eo,[e("div",to,[e("div",oo,[e("p",null,h(C.value)+"\uFF5C\u516C\u8ECA",1),e("p",ao,h(_(f)),1)]),e("div",so,[e("p",no,h(E.value)+"\u79D2\u5F8C\u66F4\u65B0",1),e("div",lo,[e("button",{class:"p-2 mr-2 text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:v[0]||(v[0]=i(M=>c.value=!0,["prevent"]))}," \u516C\u8ECA\u8CC7\u8A0A "),e("button",{id:"testt",class:"p-2 text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:v[1]||(v[1]=i(M=>{T.value=!T.value,$(_(H))},["prevent"]))},h(T.value?"\u5730\u5716\u95DC\u9589":"\u5730\u5716\u986F\u793A"),1)])])]),e("div",ro,[e("button",{class:P(["truncate border-b-2",{"border-main":o.value==0,"text-main":o.value==0,"border-transparent":o.value!=0}]),onClick:v[2]||(v[2]=i(M=>{o.value=0,$(_(H))},["prevent"]))},h(`\u5F80${s.value.DestinationStopNameZh}`),3),e("button",{class:P(["truncate border-b-2",{"border-main":o.value==1,"text-main":o.value==1,"border-transparent":o.value!=1}]),onClick:v[3]||(v[3]=i(M=>{o.value=1,$(_(H))},["prevent"]))},h(`\u5F80${s.value.DepartureStopNameZh}`),3)])]),e("div",io,[z(e("div",co,go,512),[[U,T.value]]),e("div",{class:P(["px-3 overflow-y-scroll bg-white dark:bg-black dark:text-white",{"max-h-[calc(50vh-164px)]":T.value}])},[(p(!0),m(A,null,B(b.value,M=>z((p(),m("a",{key:M.StopID,class:"flex flex-row block my-3 overflow-hidden bg-gray-200 rounded-lg dark:bg-gray-800 items-inherit",onClick:i(Uo=>_(y).push(`/stop/${_(u)}/${M.StopName.Zh_tw}`),["prevent"])},[M.StopStatus===0?(p(),m("div",{key:0,class:P(["p-2 text-center text-white basis-1/3",{"bg-main":M.EstimateTime<60,"bg-main/75":M.EstimateTime<=180&&M.EstimateTime>=60,"bg-gray-500":M.EstimateTime>181}])},[e("p",null,h(X(M.EstimateTime)),1)],2)):(p(),m("div",vo,[e("p",null,h(N(M.StopStatus)),1)])),e("p",ho,h(M.StopName.Zh_tw),1)],8,po)),[[U,M.Direction==o.value]])),128))],2)]),c.value?(p(),m("div",mo,[e("div",bo,[e("div",xo,[e("div",yo,[fo,e("div",{onClick:v[4]||(v[4]=M=>c.value=!1)},wo)]),e("div",_o,[$o,e("p",null,"\u5E73\u65E5\uFF1A"+h((L=s.value)==null?void 0:L.SubRoutes[0].FirstBusTime)+"-"+h((S=s.value)==null?void 0:S.SubRoutes[0].LastBusTime),1),e("p",null,"\u5047\u65E5\uFF1A"+h((j=s.value)==null?void 0:j.SubRoutes[0].HolidayFirstBusTime)+"-"+h((ie=s.value)==null?void 0:ie.SubRoutes[0].HolidayLastBusTime),1),Co,e("p",null,h(((ce=s.value)==null?void 0:ce.TicketPriceDescriptionZh)||"-"),1),To,e("p",null,h((ue=s.value.Operators[0])==null?void 0:ue.OperatorName.Zh_tw),1),e("div",So,[e("a",{class:"inline-block px-3 py-2 text-white rounded bg-main",target:"_blank",href:(de=s.value)==null?void 0:de.RouteMapImageUrl},"\u8A73\u7D30\u8CC7\u8A0A",8,Eo)])])])])])):ne("",!0)]}),_:1}))}},Do={class:"fixed top-[48px] max-w-md mx-auto w-full text-gray-400 bg-white dark:bg-black p-3"},Po={class:"flex items-center justify-between"},Ao={class:"py-2"},Lo={class:"text-xl text-main"},Bo={class:"text-sm text-right"},No={class:"mt-[140px]"},Io={class:"z-[5]"},Ro=e("div",{class:"w-full h-[50vh]",id:"map"},null,-1),jo=[Ro],zo=["onClick"],Zo={key:1,class:"p-2 text-center text-white bg-gray-700 basis-1/3"},Oo={class:"p-2 text-lg font-bold truncate rounded basis-2/3"},Ho={setup(n){const l=G(),x=F(),y=W(),{city:r,stop:u}=x.params,f=k(),C=k([]),o=K(()=>l.getters.theme),b=k([]);let s=!1;const a=k(Date.now()+30*1e3),E=k(),T=k({lat:"",lon:""}),t=k(!1),c=g=>{q.forEach($=>{$.value===r&&(f.value=$.name)})},Y=g=>g<60?"\u9032\u7AD9\u4E2D":g<180?"\u5373\u5C07\u9032\u7AD9":`${Math.ceil(g/60)-1}\u5206\u9418`,O=()=>{l.dispatch("handLoadingToggle");const g=[];C.value.forEach($=>{me(r,$.RouteName.Zh_tw).then(w=>{w.data.forEach(D=>{D.StopName.Zh_tw===u&&be(r,$.RouteName.Zh_tw).then(d=>{D.Direction?D.Direction_text=d.data[0].DepartureStopNameZh:D.Direction_text=d.data[0].DestinationStopNameZh,g.push(D)}).catch(d=>{console.log(d)})})}).catch(w=>{console.log(w)})}),b.value=g,l.dispatch("handLoadingToggle")},H=async()=>{try{const g=await Oe(r,u);T.value.lat=g.data[0].StopPosition.PositionLat,T.value.lon=g.data[0].StopPosition.PositionLon}catch(g){console.log(g)}},oe=async()=>{try{const g=await Ze(r,u);let $=[];g.data.forEach(w=>{$.map(d=>d.RouteName.Zh_tw).indexOf(w.RouteName.Zh_tw)===-1&&$.push(w)}),C.value=$,O()}catch(g){console.log(g)}},N=k({google:null,map:null,markers:null}),X=async g=>{const $=new ve({apiKey:"AIzaSyAFKPiMUc5jyVnzoWAJush-EDagXdyHgVc",version:"weekly",libraries:["places"],language:"zh-TW"});N.value.google=await $.load(),N.value.map=new N.value.google.maps.Map(document.getElementById("map"),{center:{lat:T.value.lat,lng:T.value.lon},zoom:16,maxZoom:20,minZoom:3,streetViewControl:!1,mapTypeControl:!1,disableDefaultUI:!0,styles:g?"":xe});const w=new google.maps.InfoWindow({content:`<div class="w-full font-bold text-center text-md">${u}</div>`}),D=new google.maps.Marker({position:N.value.map.getCenter(),icon:{url:ye,scaledSize:new google.maps.Size(24,32)},map:N.value.map});D.addListener("click",()=>{w.open({anchor:D,map:N.value.map})})},ae=g=>{switch(g){case 1:return"\u5C1A\u672A\u767C\u8ECA";case 2:return"\u4EA4\u7BA1\u4E0D\u505C\u9760";case 3:return"\u672B\u73ED\u99DB\u96E2";case 4:return"\u4ECA\u65E5\u505C\u99DB"}},V=()=>{setTimeout(()=>{if(s)return;const g=a.value-Date.now();E.value=Math.ceil((a.value-Date.now())/1e3),g<=0&&(O(),a.value=Date.now()+30*1e3),V()},1e3)};return re(()=>l.getters.theme,(g,$)=>{X(g)}),J(()=>{c(),H(),oe(),V(),le(()=>{s=!0})}),(g,$)=>(p(),Q(ee,null,{header:I(()=>[Z(te)]),body:I(()=>[e("div",Do,[e("div",Po,[e("div",Ao,[e("p",null,h(f.value)+"\uFF5C\u7AD9\u724C",1),e("p",Lo,h(_(u)),1)]),e("div",null,[e("p",Bo,h(E.value)+"\u79D2\u5F8C\u66F4\u65B0",1),e("button",{class:"p-2 my-2 text-black bg-gray-200 rounded-lg dark:text-white dark:bg-gray-800",onClick:$[0]||($[0]=i(w=>{t.value=!t.value,X(_(o))},["prevent"]))},h(t.value?"\u5730\u5716\u95DC\u9589":"\u5730\u5716\u986F\u793A"),1)])])]),e("div",No,[z(e("div",Io,jo,512),[[U,t.value]]),e("div",{class:P(["bg-white dark:bg-black dark:text-white px-3 overflow-y-scroll h-[calc(100vh-140px)]",{"max-h-[calc(50vh-140px)]":t.value}])},[(p(!0),m(A,null,B(b.value,w=>(p(),m("a",{class:"flex flex-row block my-3 overflow-hidden bg-gray-200 rounded-lg dark:bg-gray-800 items-inherit",onClick:i(D=>_(y).push(`/bus/${_(r)}/${w.RouteName.Zh_tw}?direction=${w.Direction}&stop=${_(u)}`),["prevent"]),key:w.RouteID},[w.StopStatus===0?(p(),m("div",{key:0,class:P(["p-2 text-center text-white basis-1/3",{"bg-main":w.EstimateTime<60,"bg-main/75":w.EstimateTime<=180&&w.EstimateTime>=60,"bg-gray-500":w.EstimateTime>181}])},[e("p",null,h(Y(w.EstimateTime)),1)],2)):(p(),m("div",Zo,[e("p",null,h(ae(w.StopStatus)),1)])),e("p",Oo,h(`${w.RouteName.Zh_tw}-\u5F80${w.Direction_text}`),1)],8,zo))),128))],2)])]),_:1}))}},Vo=[{path:"/",name:"Home",component:Nt},{path:"/city/:city",name:"City",component:Qt},{path:"/bus/:city/:bus",name:"Bus",component:Mo},{path:"/stop/:city/:stop",name:"Stop",component:Ho}];var Go=$e({history:Ce(),routes:Vo});const Ko=Te({state(){return{loading:!1,theme:!0}},actions:{handLoadingToggle(n){n.commit("loadingToggle")},handThemeSet(n,l){n.commit("themeSet",l)}},mutations:{loadingToggle(n){n.loading=!n.loading},themeSet(n,l){n.theme=l}},getters:{loading(n){return n.loading},theme(n){return n.theme}}});Se(Ie).use(Go).use(Ko).mount("#app");
